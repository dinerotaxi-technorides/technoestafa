doctype html
html(lang="{{lang}}" ng-app="technoridesApp",ng-controller="dashboardCtrl")
  head
    meta(charset="utf-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0, maximum-scale=1.0")
    meta(name="description", content="")
    meta(name="author", content="")
    link(rel="icon" href="/common/assets/logo/favicon.ico" type="image/x-icon")
    title {{'dashboardPageTitle' | translate}}
    link(href="/common/libs/template/css/jquery.gritter.css" rel="stylesheet")
    link(href="/common/libs/template/css/style.default.css", rel="stylesheet")
    link(href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css", rel="stylesheet")
    link(href='https://fonts.googleapis.com/css?family=Exo:400,400italic' rel='stylesheet' type='text/css')
    // Angular
    script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.js")
    script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-animate.min.js")
    script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-route.js")
    script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-cookies.js")
    script(src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-sanitize.js")
    script(src="//cdn.jsdelivr.net/angular.translate/2.1.0/angular-translate.min.js")
    link(href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet")
    link(href="https://cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/css/ui.jqgrid.css" rel="stylesheet")

    // Map
    script(src="https://maps.googleapis.com/maps/api/js?v=3&libraries=places,weather,visualization")
    script(src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js')
    link(href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet')
    script(src="https://api.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js")
    link(href='https://api.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css' rel='stylesheet')
    script(src='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js')
    link(href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet')
    link(href='https://api.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet')
    //Polygons
    link(href="/common/libs/polygons/leaflet.draw.css" rel="stylesheet")
    script(src="/common/libs/polygons/leaflet.draw.js")

    // Map
    script(src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js")
    script(src="/common/libs/angular-google-maps.min.js")

    // Gmaps polygon extension
    script(src="/common/libs/google/google.maps.Polygon.getBounds.js")
    script(src="/common/libs/google/google.maps.Polygon.moveTo.js")


    //datetimepicker
    link(rel="stylesheet", type="text/css", href="/common/libs/datetimepicker.css")
    script(src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.2/moment.min.js")
    script(src="/common/libs/moment-timezone.min.js")
    script(src="/common/libs/datetimepicker.js")



    // Module
    script(src="scripts/dashboard.js")

    // Api
    script(src="/common/scripts/api/api.js")
    script(src="scripts/services/api/apiAdapter.js")
    script(src="scripts/services/api/apiHandler.js")

    // scroll
    script(src="/common/libs/angular-scroll.min.js")

    // config files
    script(src="/common/scripts/settings.js")
    script(src="/common/scripts/versionDetector.js")
    script(src="scripts/config/route.js")
    script(src="scripts/config/locale.js")

    // controllers
    script(src="scripts/controllers/dashboardCtrl.js")
    script(src="scripts/controllers/inboxCtrl.js")
    script(src="scripts/controllers/staticsCtrl.js")
    script(src="scripts/controllers/corporate/corporateCtrl.js")
    script(src="scripts/controllers/corporate/corpAccountCtrl.js")
    script(src="scripts/controllers/corporate/costCenterCtrl.js")
    script(src="scripts/controllers/corporate/invoiceCtrl.js")
    script(src="scripts/controllers/corporate/employeeCtrl.js")
    script(src="scripts/controllers/driversReportsCtrl.js")
    script(src="scripts/controllers/monthlyReportsCtrl.js")
    script(src="scripts/controllers/dailyReportsCtrl.js")
    script(src="scripts/controllers/passengersCtrl.js")
    script(src="scripts/controllers/employees/driverInvoiceCtrl.js")
    script(src="scripts/controllers/employees/driverReceiptCtrl.js")
    script(src="scripts/controllers/employees/driverHistoryInvoiceCtrl.js")
    script(src="scripts/controllers/employees/driverHistoryReceiptCtrl.js")
    script(src="scripts/controllers/employees/driverProfileCtrl.js")
    script(src="scripts/controllers/faresCtrl.js")
    script(src="scripts/controllers/profileCtrl.js")
    script(src="scripts/controllers/parkingCtrl.js")
    script(src="scripts/controllers/scheduledHistoryCtrl.js")

    // Directives
    script(src="scripts/directives/unique-mail.js")
    script(src="../dispatcher/scripts/directives/src-err.js")
    script(src="scripts/directives/imgPreload.js")

    // Models
    script(src="/login/scripts/services/models/user.js")
    script(src="scripts/services/grid.js")
    script(src="scripts/services/models/company.js")
    script(src="scripts/services/models/drivers.js")
    script(src="scripts/services/models/employees.js")
    script(src="scripts/services/models/inbox.js")
    script(src="scripts/services/corporate.js")
    script(src="/login/scripts/services/models/error.js")
    script(src="scripts/services/models/passengers.js")
    script(src="scripts/services/models/operations.js")
    script(src="scripts/services/models/paginator.js")
    script(src="scripts/services/models/dailyReports.js")
    script(src="scripts/services/models/monthlyReports.js")
    script(src="scripts/services/models/driversReports.js")
    script(src="scripts/services/models/zonePricing.js")
    script(src="scripts/services/models/parkings.js")
    script(src="scripts/services/models/zones.js")


    script(src="/common/scripts/map.js")
    script(src="/common/scripts/google.js")
    script(src="/common/scripts/mapbox.js")


    // MODAL
    script(src="/common/scripts/modal/modal-directive.js")
    script(src="/common/scripts/modal/modal-service.js")

    // cookies fix
    script(src="/common/libs/angular-cookie.js")

    // Days Between
    script(src="/common/libs/days-between.js")

    // Feedback
    script(src="/common/scripts/feedback.js")

    // Error
    script(src="/common/scripts/messages.js")


    // Underscore
    script(src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js")

    // HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries
    // if lt IE 9
      script(src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js")
      script(src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js")

    // custom styles
    link(href="styles/dashboard.css", rel="stylesheet")

    // Analytics
    script(aync src="https://www.google-analytics.com/analytics.js")
    script(src="/common/libs/angulartics.min.js")
    script(src="/common/libs/angulartics-ga.min.js")
    script.
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-45881678-1', 'auto');
              //ga('send', 'pageview');

    // Libraries
    script(src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js")
    script(src="/common/libs/jquery.scrollTo.min.js")
    script(src="https://cdn.bootcss.com/holder/2.3.2/holder.min.js")
    //Morris
    script(src="/common/libs/template/js/morris.min.js")
    script(src="/common/libs/angular-morris-chart.min.js")
    //libs
    script(src="/common/libs/template/js/jquery-migrate-1.2.1.min.js")
    script(src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js")
    script(src="/common/libs/template/js/modernizr.min.js")
    script(src="/common/libs/template/js/jquery.sparkline.min.js")
    script(src="/common/libs/template/js/toggles.min.js")
    //script(src="/common/libs/template/js/retina.min.js")
    script(src="/common/libs/template/js/jquery.cookies.js")
    script(src="/common/libs/template/js/raphael-2.1.0.min.js")
    script(src="/common/libs/template/js/custom.js")
    script(src="/common/libs/template/js/jquery.gritter.min.js")
    script(src="/common/libs/template/js/dashboard.js")
    script(src="/common/libs/autocomplete.js")
    script(src="//cdnjs.cloudflare.com/ajax/libs/jqgrid/4.6.0/js/jquery.jqGrid.min.js")
    script(ng-src="{{grid.lang}}")
    script(src="/common/libs/tinymce-angular.js")
    script(src="/common/libs/tinymce/tinymce.min.js")
    script(src="/common/libs/angular-toggle-switch.js")
    link(rel="stylesheet" type="text/css" href="/common/libs/angular-toggle-switch.css")




    //Start of technorides Zendesk Widget script
    script.

            /*<![CDATA[*/window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","technorides.zendesk.com");/*]]>*/
    // End of technorides Zendesk Widget script
  body
    div(ng-include="'/common/views/partials/version.html'")
    // Preloader
    #preloader
      #status
        i.fa.fa-spinner.fa-spin.fa-3x
    section
      .leftpanel
        .logopanel
          h1
            p Techno
              span Rides
        // logopanel
        .leftpanelinner
          // This is only visible to small devices
          .visible-xs.hidden-sm.hidden-md.hidden-lg
            .media.userlogged
              img.media-object(alt="", src="/common/assets/user/profile.png")
              .media-body
                h4 {{user.firstName}} {{user.lastName}}
            ul.nav.nav-pills.nav-stacked.nav-bracket.mb30
              li
                a(data-toggle="modal" href="#profile")
                  i.fa.fa-user
                  span(translate="") Profile
              li.hidden
                a(data-toggle="modal", data-target=".feedback-modal" href="#")
                  i.fa.fa-question-circle
                  span(translate="") Feedback
              li
                a(href="#",ng-click="logout()")
                  i.fa.fa-power-off
                  span(translate="") Logout
          h5
          ul.nav.nav-pills.nav-stacked.nav-bracket
            li(ng-class="{active: activetab == '/'}" ng-click="unsetCostCenter();unsetCompany()").hidden
              a(href="#/")
                i.fa.fa-tachometer
                span(translate="") Dashboard
            li(ng-class="{active: activetab == '/inbox'}" ng-click="unsetCostCenter();unsetCompany()")
              a(href="#inbox")
                i.fa.fa-envelope
                span(translate="") Inbox

            li.nav-parent
              a(href="")
                i.fa.fa-history
                span(translate="") History
              ul.children
                li(ng-class="{active : activetab == '/history'}")
                  a(href="#history")
                    i.fa.fa-caret-right
                    span(translate="") Operations
                li(ng-class="{active : activetab == '/history/scheduled'}")
                  a(href="#history/scheduled")
                    i.fa.fa-caret-right
                    span(translate="") Scheduled

            li(ng-class="{active: activetab == '/passengers'}" ng-click="unsetCostCenter();unsetCompany()")
              a(href="#passengers")
                i.fa.fa-users
                span(translate="") Passengers

            li.nav-parent(ng-click="unsetCostCenter();unsetCompany()")
              a(href="")
                i.fa.fa-male
                span(translate="") Employees
              ul.children
                li(ng-class="{active : activetab == '/employees/drivers'}")
                  a(href="#employees/drivers")
                    i.fa.fa-caret-right
                    span(translate="") Drivers
                li(ng-class="{active : activetab == '/employees/operators'}")
                  a(href="#employees/operators")
                    i.fa.fa-caret-right
                    span(translate="") Dispatchers

            li(ng-class="{active: activetab == '/corporate'}")
              a(href="#corporate")
                i.fa.fa-briefcase
                span(translate="") Corporate

            li.nav-parent
              a(href="")
                i.fa.fa-area-chart
                span(translate="") Reports
              ul.children
                li(ng-class="{active : activetab == '/reports/operations-month'}")
                  a(href="#reports/operations-month")
                    i.fa.fa-caret-right
                    span(translate="") OperationsMonthly
                li(ng-class="{active : activetab == '/reports/drivers'}")
                  a(href="#reports/drivers")
                    i.fa.fa-caret-right
                    span(translate="") Drivers
                li(ng-class="{active : activetab == '/reports/operations-day'}")
                  a(href="#reports/operations-day")
                    i.fa.fa-caret-right
                    span(translate="") OperationsDaily
            li.nav-parent
              a(href="")
                i.fa.fa-cog
                span(translate="") Configuration
              ul.children
                li(ng-class="{active : activetab == '/configuration/timezone'}")
                  a(href="#configuration/timezone")
                    i.fa.fa-caret-right
                    span(translate="") timeZone
                li(ng-class="{active : activetab == '/configuration/drivers'}")
                  a(href="#configuration/drivers")
                    i.fa.fa-caret-right
                    span(translate="") Drivers
                li(ng-class="{active : activetab == '/configuration/operations'}")
                  a(href="#configuration/operations")
                    i.fa.fa-caret-right
                    span(translate="") Operations
                li(ng-class="{active : activetab == '/configuration/scheduled'}")
                  a(href="#configuration/scheduled")
                    i.fa.fa-caret-right
                    span(translate="") Scheduled
                li(ng-class="{active : activetab == '/configuration/charges'}")
                  a(href="#configuration/charges")
                    i.fa.fa-caret-right
                    span(translate="") ChargesConfig
                li(ng-class="{active : activetab == '/configuration/parkings'}")
                  a(href="#configuration/parkings")
                    i.fa.fa-caret-right
                    span(translate="") Parkings
                li(ng-class="{active : activetab == '/configuration/fares'}" ng-click="fixFaresGridWidth()")
                  a(href="#configuration/fares")
                    i.fa.fa-caret-right
                    span(translate="") Fares
                li(ng-class="{active : activetab == '/configuration/webpage'}")
                  a(href="#configuration/webpage")
                    i.fa.fa-caret-right
                    span(translate="") WebPage
                li(ng-class="{active : activetab == '/configuration/emails'}")
                  a(href="#configuration/emails")
                    i.fa.fa-caret-right
                    span(translate="") Email


      .mainpanel
        .headerbar
          a.menutoggle
            i.fa.fa-bars
          .header-right
            ul.headermenu
              li
                .btn-group
                  button.btn.btn-default.dropdown-toggle(type="button" data-toggle="dropdown" aria-expanded="false")
                    img(ng-src="/technorides/assets/lang/{{lang}}.png")
                    span(ng-if="lang == 'es'") Español
                    span(ng-if="lang == 'en'") English
                    span(ng-if="lang == 'fr'") Francais
                    span.caret
                  ul.dropdown-menu#langdrop(role="menu")
                    li.new-lang
                      a(ng-click="changeLanguage('en')")
                        img(ng-src="/technorides/assets/lang/en.png")
                        | English
                    li.new-lang
                      a(ng-click="changeLanguage('es')")
                        img(ng-src="/technorides/assets/lang/es.png")
                        | Español
                    li.new-lang
                      a(ng-click="changeLanguage('fr')")
                        img(ng-src="/technorides/assets/lang/fr.png")
                        | Francais
              li
                .btn-group
                  button.btn.btn-default.dropdown-toggle(type="button", data-toggle="dropdown")
                    img(src="/common/assets/user/profile.png", alt="")
                    span {{user.firstName}} {{user.lastName}}
                    span.caret
                  ul.dropdown-menu.dropdown-menu-usermenu.pull-right
                    li
                      a(data-toggle="modal" href="#profile" ng-click="unsetCostCenter();unsetCompany()")
                        i.fa.fa-user
                        span(translate="") Profile
                    li.hidden
                      a(data-toggle="modal", data-target=".feedback-modal" href="#")
                        i.fa.fa-question-circle
                        span(translate="") Feedback
                    li
                      a(href="#", ng-click="logout()")
                        i.fa.fa-power-off
                        span(translate="") Logout
        div(ng-view="")
        div(ng-include="'/common/views/partials/modals/feedback.html'")

  div(ng-include="'/common/views/partials/modals/messages.html'")
  div(ng-include="'/common/scripts/modal/async.html'")
